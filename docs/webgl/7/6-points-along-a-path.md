## 沿路径的点

希望您现在对如何移动相机有了基本的了解。但是，如果您必须为动画的每一帧（通常以每秒 30 帧运行）指定相机的唯一位置和方向，那么您还有很多工作要做！

动画有一个叫做关键帧的概念。要使用关键帧，您可以为特定帧的相机（或任何对象）分配起始位置和方向。然后为将来的帧分配结束位置和方向。然后计算机为每个中间帧计算相机的位置和方向。关键帧是所有 3D 计算机图形动画的基础。

本课介绍如何计算起始值和结束值之间的中间值。

### 参数方程

给定一个起始值和结束值，我们想要计算它们之间的中间值。我们假设我们知道起始值的时间（或帧）和结束值的时间（或帧）。参数方程是这些计算的理想方法。参数方程是单个变量的函数，我们通常称之为 t。将 t 视为代表时间。为了尽可能通用，我们假设 t 在 0.0 和 1.0 之间变化。您始终可以缩放结果以匹配任何特定的时间间隔。

让我们从一个简单的例子开始。让我们沿着两点 p1 和 p2 之间的直线计算点。 p1 和 p2 之间的所有中间点都可以使用两个点的分数组合来计算。方程如下所示：

```js
p = (1-t)*p1 + t*p2;  // where t varies from 0.0 to 1.0
```
请注意以下事项：
- 当 t = 0.0 时，方程变为 p = p1。
- 当 t = 1.0 时，方程变为 p = p2。
- 当 t = 0.25 时，方程变为 p = 0.75*p1 + 0.25*p2。点 p 距离 p1 25%，距离 p2 75%。
- t + (1-t) 始终等于 1.0。这意味着我们总是得到 100% 的两分。对于任何 t 值，您将占用 p2 的 t% 和 p1 的剩余百分比。
- 对于 3D 空间中的直线，我们计算 3 个值，但仅改变单个参数 t:
  - px = (1-t)*p1x + t*p2x
  - py = (1-t)*p1y + t*p2y
  - pz = (1-t)*p1z + t*p2z

我们将讨论的所有参数方程都取原始值的百分比来产生中间值。这是一个非常简单而优雅的想法。

### 基函数

产生用于参数方程的分数的函数称为基函数。让我们为上面的简单示例绘制基函数。基函数是 (1-t) 和 (t)。对于 0.0 和 1.0 之间的 t 值，这两个函数的绘图给出了图中的直线。关于这些基函数，请注意以下几点：
- t 的每个值都是一个分数。 t 值是百分比。
- 当 t=0 时，(1-t) 为 1，(t) 为 0。这迫使方程在 t=0 时计算 p1。
- 基函数是线性的，这使得中间点位于一条直线上。
- 对于所有 t 值，基函数总和为 1。如果该属性对于一组基函数为真，则路径上的所有中间点都位于定义路径的点的凸包内。
<center>
  <img src='/7/basis_functions_linear.png' />
</center>

深入研究基函数的所有可能性超出了这些教程的范围，但也许您可以在未来获得更多关于参数方程的信息。这是“大创意”：

- 连续路径可以由一系列点定义。用于组合点百分比的基函数确定了确切的路径。

这是一个“弄湿你的胃口”的例子。给定四个点，您可以使用如下计算的四个点的百分比来计算沿近似这些点的曲线的中间点：

![](/7/eq1.png)

下图显示了基函数图。有许多可能的基函数可以计算通过一系列点的路径。也许你以后会有兴趣更深入地追求这些想法。

<center>
  <img src='/7/hermite_curve_basis_functions.png' />
</center>

### 圆形路径

围绕以任意 3D 点和任意旋转矢量为中心的圆形路径计算中间点最好通过矩阵变换来完成。由于所有旋转都是关于原点的，因此您需要执行以下三个步骤：

1. 将中心点平移到全局原点。
2. 使用旋转变换围绕旋转轴旋转
3. 将中心点平移回其原始位置。

在参数方程的情况下，您使用单个值来计算沿路径的新位置，但在这种情况下，单个值是一个角度。



