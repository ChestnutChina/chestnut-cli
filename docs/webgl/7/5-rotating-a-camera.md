## 旋转相机

本课讨论了如何旋转摄像机的方向。请记住，几乎所有的相机运动都是相对于相机的当前参照系而言的。

### 倾斜运动

倾斜相机意味着您围绕其 u 轴旋转相机的方向。您可以向上倾斜（正旋转）或向下倾斜（负旋转）。

与上一课一样，实现倾斜摄像机运动有两种基本方法：

- 修改调用lookat函数的参数，然后调用lookat创建相机变换矩阵，或者
- 直接修改相机位置坐标轴的定义。

让我们以两种方式解决问题。

### 使用lookAt 倾斜

在上一课中，您学习了一个名为 LookAtCamera 的类，它使用两个点和一个向量定义了一个相机：1) 相机的位置，2) 沿其视线的点的位置，以及 3) 一个方向是向上的。为了“倾斜”相机，我们在 LookAtCamera 类中添加了一个名为tilt 的新函数。

倾斜运动必须改变中心点。我们需要围绕相机的 u 轴旋转中心点的位置，这将改变相机的视线。请记住，如果视线和“向上矢量”指向同一方向，则相机将无效。因此，如果视线矢量和“向上矢量”之间的角度变小，我们需要旋转“向上矢量”以使其远离视线矢量。该图说明了倾斜运动。

<center>
  <img src='/7/tilt.png' />
</center>

倾斜函数接收以度为单位的角度，该角度是旋转量。如果角度为正，则该功能将“向上倾斜”。如果角度为负，该功能将“向下倾斜”。基本步骤是：

- 计算相机的 u 轴。
- 将相机移动到原点。这会将眼睛点移动到原点，并将中心点移动到相对于原点的某个位置。您通过 (-eye_x, -eye_y, -eye_z) 进行翻译。这是必需的，因为所有旋转都是关于原点的。
- 将中心点围绕 u 轴旋转倾斜角度。
- 将相机移回其原始位置。您将中心点平移 (eye_x, eye_y, eye_z)。
- 使用 lookAt 函数重新计算相机的变换矩阵。

请注意，上述所有操作都需要由 4×4 变换矩阵执行，因为您不一定要在与全局轴平行的平面中工作。

使用以下演示来试验倾斜相机。请注意，倾斜始终相对于相机的参考系。如果您想试验代码，则该代码是可编辑的。

点击查看[交互式例子](http://learnwebgl.brown37.net/07_cameras/camera_rotating_motion.html#use-lookat-to-tilt)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/07_cameras/camera_tilt_lookat/camera_tilt_lookat.html)


你必须仔细研究上面的代码才能理解相机的运动。请在研究语句时阅读代码注释。

### 修改相机的定义

让我们使用相机的基本定义来实现相机的“倾斜”运动：一个位置和三个坐标轴。使用我们在上一课中介绍的 AxesCamera 类，我们添加了一个名为tilt 的新函数。要倾斜相机，我们只需要围绕 u 轴旋转 v 和 n 坐标轴。相机的眼睛位置不会改变。

请在下面的演示程序中学习倾斜功能。此演示代码是可编辑的。

点击查看[交互式例子](http://learnwebgl.brown37.net/07_cameras/camera_rotating_motion.html#modify-a-camera-s-definition)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/07_cameras/camera_tilt_axes/camera_tilt_axes.html)

### 总结

涉及旋转的相机运动将围绕相机坐标系的当前轴之一旋转。如果相机倾斜，则旋转围绕 u 轴。如果相机平移，则旋转围绕 v 轴。如果相机倾斜，则旋转围绕 n 轴。相机运动几乎总是与相机的当前参考框架有关。

与上一课一样，操作实际的相机定义（一个点和 3 个轴）需要更少的计算，但对相机矩阵变换有更多的数学理解。