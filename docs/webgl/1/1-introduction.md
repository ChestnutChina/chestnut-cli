## 简介

### 欢迎来到这个 "学习WebGL "网站

本网站将帮助你学习如何在网页中显示和操作实时的三维计算机图形。三维计算机图形有可能创造出你头脑中所能想象的任何东西的可视化。但它并不简单，也不容易实现。因此，请花点时间，有条不紊地学习本网站的教程。

### 学习理念

掌握学习是这套教程的关键。卡恩学院在掌握学习方面取得了巨大成功，这也是开发这套教程的主要原因之一。今天的学生在一个系统中根深蒂固，他们有条件对一个主题学习一点，然后继续前进--不管他们还有多少不懂的地方。作为一个学生，你需要重新思考学习的意义，并打破你对不懂的东西视而不见的旧习惯。

本网站的设计原则是，复杂的主题应该 "自上而下 "地学习。重要的是，在你深入研究细节之前，你要理解"提纲"。当你学习细节时，你将有一个框架，使你能够理解细节是如何完成一个更大问题的一小部分。

这些教程被设计成自我指导和自定进度。我们鼓励你停留在一个主题上，直到你对它的理解超过了表面水平。如果你在进入下一个主题之前 "掌握"了每个主题，你将为后面更详细的主题做好准备。请按照内容表页面上的课程流程进行学习。这将为你提供一个坚实的基础，以便理解新的主题。

### 什么是WebGL？

WebGL是一个JavaScript应用程序员接口（API），允许程序员在网络浏览器窗口中使用计算设备的图形处理单元（GPU）来渲染实时三维计算机图形。它是目前软件行业唯一用于制作3D计算机图形的跨平台开发环境。学习WebGL是了解计算机图形学基础知识的最佳途径，同时最终拥有一个 "工具箱"，可以用来制作自己的计算机图形。

### 什么是WebGL程序？

一个包含由WebGL程序生成的3D计算机图形的典型网页是由这些基本部分组成的：

- 网页的HTML（超文本标记语言）描述。
- 一个CSS（层叠样式表），它描述了HTML描述中的每个元素是如何格式化的。
- 网页中的一个HTML画布元素，它提供了一个可以渲染三维计算机图形的矩形区域。
- 定义要渲染的三维对象的图形数据。
- 加载你的图形数据的JavaScript程序，配置你的图形数据，渲染你的图形数据，以及响应用户事件的代码。
- OpenGL着色器程序，执行图形渲染的关键部分。

所有这些基本部分最初都驻扎在一个网络服务器上。当用户（客户端）请求一个包含3D图形的网页时，上述数据必须被传输到客户端的计算机，存储在正确的地方，然后由适当的处理器处理。现代计算设备有多个不同类型的处理器。

1. [CPU](http://en.wikipedia.org/wiki/Central_processing_unit)--中央处理单元--是设备的 "大脑"。CPU执行一般处理，并运行控制设备整体功能的操作系统（OS）。
2. [GPU](https://en.wikipedia.org/wiki/Graphics_processing_unit)--图形处理单元--专门设计用于渲染3D图形。

现代计算设备也有许多为不同目的设计的内存类型。

1. RAM - 随机存取存储器 - 存储程序数据和程序指令。
2. 图形存储器 - 用于视频和图形处理的独立存储器系统。GPU有专门为3D图形设计的专用内存。

这些想法的简化图示如下。

<center>
<img src='/1/hardware_overview.png'>
<p>计算设备中的主要硬件部分</p>
</center>

当一个客户从网络服务器上请求一个网页时，会发生以下一系列事件：

1. 服务器将网页的HTML描述发送给客户，客户将网页存储在RAM中。
2. 客户端的网络浏览器（如Chrome、Safari、Internet Explorer）读取HTML页面描述，并请求HTML代码中引用的任何其他文件，包括图像、JavaScript代码、CSS（层叠样式表）、数据文件等。所有这些文件都存储在客户端的RAM中。
3. 如果有与页面相关的JavaScript代码，它将被执行。对于一个包含3D图形的页面，JavaScript代码将执行以下任务：
    - 它可能要求从服务器下载其他数据文件（例如，描述要渲染的3D图形对象的数据）。
    - 它将获得并初始化与HTML画布元素相关的WebGL图形上下文，该元素将被渲染成图形。
    - 它将配置并复制模型数据到GPU的内存。(严格来说，数据被复制到GPU的顶点对象缓冲区）。
    - 它将建立 "事件处理程序"，将HTML事件与JavaScript代码联系起来，在事件发生时执行。
4. 最后，网页被渲染到浏览器的一个窗口，网页等待用户的事件。定时器事件可以被设置为在一个固定的时间表上自动生成事件，这可以创建3D图形的动画。

当一个JavaScript事件处理程序开始向HTML画布元素渲染图形时，它告诉GPU哪些对象缓冲区包含它要渲染的数据，然后发出WebGL "绘制 "命令。请注意，要渲染的数据通常已经在GPU的内存中。在一个典型的图形程序中，模型数据只被复制到GPU的内存中一次。这就节省了时间，使图形渲染变得高效和快速。当我们使用 "实时图形 "这个术语时，我们的意思是，渲染可以在1/30秒内完成，用户可以看到流畅的图形动画。只有在尽量减少GPU内存和RAM之间的数据传输的情况下，才有可能实现如此快速的渲染。

昂贵的操作只做一次，这是所有计算机图形的基本原则。在这些教程中，你会不断看到 "预处理步骤 "和 "渲染步骤 "的短语。我们的目标是只执行一次 "预处理步骤"。因此，执行图形渲染的JavaScript代码通常分为两个独立的部分：1）设置（或预处理）部分，完成一次；2）渲染部分，在每次绘制对象时执行。每堂教程都会对预处理代码和渲染代码进行明确区分。

为了再次强调 "提纲"，下图总结了上述讨论。请注意，JavaScript代码在CPU上运行，而图形渲染则由GPU完成。JavaScript代码是 "主人"。它 "主持大局"，告诉GPU什么时候渲染，渲染什么。

<center>
<img src="/1/data_location.png"/>
<p>WebGL程序的不同部分被存储和执行的地方</p>
</center>

### 教程实例

我们已经开发了一个网页界面，可以查看WebGL代码、数据和WebGL渲染的结果，下面是一个例子。该界面将帮助您以交互方式进行WebGL程序的实验。请记住，个人的实验对你的学习至关重要! 当你走到交互式的例子时，请暂停一下，并进行实验!

该界面包括横跨交互式例子顶部的命令，允许有以下选项。

- **重新启动** - 如果您编辑了左侧窗口窗格中显示的代码，您可以点击 "重新启动 "按钮，使用您修改的代码和/或数据重新加载WebGL程序。如果您在代码或数据中引入错误，WebGL程序将无法正常执行，但您应该看到画布下方的输出窗口窗格中显示的错误信息。在某些情况下，错误只会在JavaScript控制台窗口中显示出来。有些编辑窗格禁用了编辑功能，以防止无意的改变。下面的三个编辑窗格都禁用了编辑功能，因为你还没有准备好对代码进行实验。
- **显示复选框** - 允许你隐藏交互式例子中三个显示面板中的任何一个。通常情况下，只有一个或两个文件会呈现在编辑窗口中。这将有助于您一次专注于WebGL程序的单一部分。
- **下载全部** - 将构成该WebGL程序的所有文件下载到您电脑的默认下载文件夹。文件的数量可能很大，这取决于例子的复杂性。要在一个独立的程序中使用这些代码，必须将这些文件适当地组织在子文件夹中。(建议你在下载WebGL程序之前清空你的下载文件夹，以免错过任何重要文件。

下面的交互式例子是为了让你熟悉一下界面。在这个例子中，所有的编辑窗口都是只读的。只需检查HTML、JavaScript和模型数据就可以看到它是什么样子。在这个具体的例子中，你可以通过在画布窗口中点击和拖动你的鼠标来与图形进行互动。你还可以使用画布窗口下面的复选框来启用或禁用自动动画。如果你想把WebGL程序的结果作为一个单独的、独立的页面来看，请使用互动例子底部的超链接。根据您的默认浏览器设置，WebGL程序将在一个新窗口或新标签中打开。

点击查看[交互式例子](http://learnwebgl.brown37.net/the_big_picture/introduction.html#tutorial-examples)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/the_big_picture/overview/example.html)

下载上述例子的文件，然后在你电脑的下载文件夹中查看所创建的文件。这将使你对WebGL程序的要求有一个感觉。

### 总结

当您开始学习WebGL时，请记得回顾这些"提纲"课程，以便将细节放到适当的位置。下面的课程涵盖了这些"提纲"主题。

- 什么是三维计算机图形，它是如何工作的？
- WebGL从何而来？
- 如何管理WebGL程序的复杂性？

