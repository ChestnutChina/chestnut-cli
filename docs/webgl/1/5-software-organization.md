## WebGL程序的软件组织

一个WebGL程序是由大量的软件组成的。如果没有良好的软件组织和抽象，你随着时间的推移维护和增强这些图形程序的能力就会大打折扣。大多数程序员都讨厌别人把规定的软件结构强加给他们。设计软件的方法有很多，一个程序员的好设计可能会让另一个程序员感到困惑。但无法回避的事实是，需要一个精心设计的软件结构。

JavaScript支持面向对象的编程，这些教程中的软件被设计成对象的集合，有以下非常重要的原因：

- Javascript的全局地址空间里有大量的变量和函数。你在设计软件时应该始终限制全局定义的值和函数的数量，但对Javascript来说更是如此。这可以保护你不被覆盖和重新定义Javascript的内置功能。
- 好的软件设计规定，数据及其相关的功能要组合成一个逻辑单元。这为你的代码创建了一个逻辑组织，并保护了每个对象内的数据不被意外修改。
- 你的代码的结构应该有利于在一个网页上的多个画布窗口中进行多个3D图形的渲染。创建可用于创建独立对象实例的Javascript类，每个画布渲染都有一个对象实例，这才是合理的。
- 你的一些Javascript代码可以实现通用性，足以重复使用于各种图形项目。其他代码将是非常具体的程序。如果你不把通用代码和特定程序代码分开，你就会限制你的代码重复使用。WebGL应用程序很复杂，你会希望尽可能多地重复使用代码。
- WebGL代码是非常相互依赖的。如果你改变着色器程序中的一条语句，可能需要你改变相关Javascript代码的许多方面。这将有助于你将相互依赖的代码与其他 "独立的 "代码分开。
- 将一次性初始化代码与重复执行的渲染代码隔离开来的重要性怎么强调都不过分。你的代码应该非常清楚哪些逻辑是作为预处理步骤只执行一次的。这将使你更容易优化你的图形的实时渲染速度。

在这些教程中使用的软件结构的样本显示在下面的UML（统一建模语言）图中。箭头表示关系。蓝色框中的类是静态的Javascript库，在不同的WebGL程序中保持不变。橙色框中的类是Javascript代码，根据制作的图形的复杂程度和类型而变化。

<center>
<img src="/1/software_design.png" />
</center>

上述UML图的细节在这一点上并不重要。重要的是，你要明白，面向对象的编程对于成功实现你的WebGL程序至关重要。例如，一个场景通常由多个模型组成。为每个模型创建一个对象是有意义的。这样就把每个模型的复杂性隔离在一个单独的JavaScript对象中，而且大大促进了代码的重复使用。

本软件设计中定义的Javascript类在编写时考虑到了理解和清晰性。它们都有很好的文档，被分成独立的文件，并使用描述性的名字进行编码。这些类是开源的，旨在供你重新使用。如果你要把它们作为一个更大的 "生产 "程序的一部分，它们通常会被合并成更少的文件，并通过删除空白和注释来进行压缩。我们不建议你在完全调试好你的程序之前，对你的Javascript代码进行压缩。我们强烈建议你保留你的程序的非最小化版本，以便将来调试和改进。

为了学习如何开发WebGL程序，你将从一个简单的工作实例开始，并一次性修改系统的小部分。然而，随着我们引入先进的图形概念，软件的许多部分将不得不同时改变。这就是为什么我们要以大局为重开始这些教程的一个原因。你需要学习软件的一个部分的小变化是如何通过其他部分传播的。

由于你将学习代码实例并修改现有的代码，我们需要在下一节讨论编码标准。
