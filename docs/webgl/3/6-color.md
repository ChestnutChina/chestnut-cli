## 颜色

一个模型面最基本的表面属性是它的颜色。

### 颜色模型

对于使用光产生图像的设备，如计算机显示器，颜色被模拟为三种基本颜色的组合：红、绿和蓝。光是加法的。如果你把红、绿、蓝三色的光全加在一起，就会得到白光。没有光则产生黑色。人眼可辨的所有颜色都可以通过红、绿、蓝光的某种组合来创造。这被称为RGB（红、绿、蓝）色彩系统。

对于通过反射光产生图像的设备，如印刷品，颜色被模拟为三种基色的组合：青色、品红和黄色。这些颜料吸收了某些波长的光，基本上反映了红、绿和蓝光。因此，这并不是真正用不同的方式来表示颜色，它只是用不同的方式来产生反射光。人眼在印刷品上可以辨别的所有颜色都可以通过青色、品色和黄色颜料的某种组合来创造。这被称为CMY（青色、洋红色、黄色）色彩系统。打印机通常也使用空白颜料来获得更清晰的黑色。这被称为CMYK系统，其中K代表 "blacK"。

用RGB表示的颜色可以转换为CMYK，反之亦然。我们将集中讨论RGB颜色，因为这就是WebGL程序通常使用的颜色。

我们需要三个值来表示一种特定的颜色：有多少红光、绿光和蓝光。把这些数值做成百分比是有意义的。0%意味着没有颜色，而100%意味着全色。由设备的硬件来决定一个颜色的100%意味着什么。如果你在商店里看了各种品牌的电视，你会很快认识到这一点。它们并不是都能从相同的数据中还原出相同的颜色

### 独立于设备的颜色

请记住，在浏览器中创建WebGL程序的目标之一是图形能够在跨平台环境中正确执行。我们可以指定独立于设备的颜色。独立于设备的颜色的标准方案使用浮点值。因此，(0.45, 0.23, 0.89)代表一种颜色，它有45%的红色、23%的绿色和89%的蓝色。

使用浮点值可以表示多少种独特的颜色？很多! 每个分量值可以代表大约800万个不同的百分比值。这就允许有大约600,000,000,000,000,000,000种可能的颜色! 人眼能看到这么多颜色吗？答案是不能! 典型的人只能看到任何特定色调的大约250种不同的变化，尽管色彩感知确实因人而异。请看下面这张图片，它显示了各种[颜色深度](https://en.wikipedia.org/wiki/Color_depth)选择的黑与白的不同色调。

<center>
<img src='/3/bitdepths_chart_med.jpg' />
<p>黑白色调的颜色深度(<a href='https://www.the-working-man.org/2014/12/bit-depth-color-precision-in-raster.html' target='_blank'>1</a>)</p>
</center>

请注意上述图片的以下事实：
- 每个色块都是一种纯色，尽管看起来颜色在一个色块内是变化的。这种现象被称为马赫带。为了向自己证明上面的每个色块都是一个纯色，可以拿两张纸，把特定色块两边的色块遮住。该色块就会变成一个统一的颜色! 去掉遮盖物，"带状 "效果将重新出现。你的眼睛是用来增强对比度的!
- 对于大多数人来说，8位色彩深度提供了一个平滑的色彩进展。你能在 "8比特 "图像中看到任何机器带吗？如果没有，这已经达到或超过了你眼睛的最大色彩分辨率。
- 8比特 "的颜色深度允许256种不同的黑白色调。如果你对每个RGB分量值使用8比特，你可以表示超过1600万种不同的颜色。(2 8) 3. 对于普通人来说，这种颜色精度被认为是 "全色"。

### 透明度

一个不透明的物体看起来是实心的，基本上反射所有照射到它的光线。透明的物体允许一些光线穿过它。一个物体的透明度可以根据其成分而有很大的不同。例如，一个玻璃杯可能是高度透明的，而水是部分透明的。准确地对透明度进行建模是非常困难的。一个非常简单的透明度模型是用一个颜色值来存储一个 "不透明的百分比"。这个百分比被称为 "alpha值"。RGBA颜色系统为一个颜色存储了4个分量值，其中前三个值是红、绿、蓝分量，最后一个值是alpha值。你还会看到对ABGR和ARGB颜色表示法的引用。字母的顺序表示颜色规范中数值的顺序。

使用浮点百分比来表示每个组成部分，这里有几个例子：

| RGBA color  | 不透明 | 透明 |
| ----------- | -------- | --------- |
| (0.2, 0.1, 0.9, 1.0) | 不透明，所有光都被反射 | 0% 透明 |
| (0.2, 0.1, 0.9, 0.9) | 大多不透明 | 10% 透明 |
| (0.2, 0.1, 0.9, 0.5) | 一半的光线通过了该物体 | 50% 透明 |
| (0.2, 0.1, 0.9, 0.0) | 所有的光都穿过这个物体，这个物体是看不见的。 | 100% 透明 |

### 颜色的深浅

请注意，由于(0,0,0)是黑色，(1,1,1)是白色，任何特定颜色的阴影都是通过向黑色或白色靠近而产生的。你可以使用两个值之间的线性关系的参数方程来使一个颜色的色调变深或变浅。

计算A和B值之间线性变化的参数方程：
```js
C = A + (B-A)*t;  // where t varies between 0 and 1
```

要改变一个颜色（r,g,b）使其变浅，请将其移近（1,1,1）。
```js
newR = r + (1-r)*t;  // where t varies between 0 and 1
newG = g + (1-g)*t;  // where t varies between 0 and 1
newB = b + (1-b)*t;  // where t varies between 0 and 1
```

要改变一个颜色（r,g,b），使其变得更暗，请将其移近（0,0,0）。
```js
newR = r + (0-r)*t;  // where t varies between 0 and 1
newG = g + (0-g)*t;  // where t varies between 0 and 1
newB = b + (0-b)*t;  // where t varies between 0 and 1
// or
newR = r*t;  // where t varies between 1 and 0
newG = g*t;  // where t varies between 1 and 0
newB = b*t;  // where t varies between 1 and 0
```

### WebGL 颜色

WebGL中的所有颜色都需要一个四分量的RGBA值。如果你不指定alpha值，就会假定它是1.0（不透明）。WebGL 1.0要求所有顶点属性都是浮点值。因此，不透明的颜色值将被存储为3个浮点值，而允许透明的颜色值将需要4个浮点值。