## 例3：每个顶点一种颜色

这个例子将帮助你理解着色器程序中的不同变量。我们想让一个三角形内的像素的颜色在整个三角形的面上发生变化。这可以实现各种特殊的效果，比如渐变色和照明效果。

为了演示不同的变量是如何工作的，我们可以保留之前的着色器程序，只是改变我们的数据。我们将为一个三角形的每个顶点分配不同的颜色。

### 模型介绍

一个Triangle3对象将包含3个顶点和3种颜色。我们的3D模型的一个新版本在下面的例子中显示：

点击查看[交互式例子](http://learnwebgl.brown37.net/rendering/render_example_03.html#the-model)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/rendering/simple_pyramid_color_vertices/simple_pyramid_color_vertices.html)

### 着色器程序

我们的着色器程序与之前的例子相比没有变化，但它们显示在下面，以便我们可以再次讨论它们。

点击查看[交互式例子](http://learnwebgl.brown37.net/rendering/render_example_03.html#the-shader-programs)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/rendering/simple_pyramid_color_vertices/simple_pyramid_color_vertices2.html)

之前对顶点着色器的解释说，顶点着色器的工作是定位一个顶点并为该顶点设置gl_Position输出变量。这是真的，但这只是故事的一半。顶点着色器还准备和传递关于顶点的数据给片段着色器。记住，片段是与单个像素相关的数据集合。那么，在顶点着色器中声明的任何变化变量都将被传递给该单个顶点的片段着色器。如果我们在顶点着色器中声明并计算了六个变化变量，那么所有的六个值都将被传递给片段着色器。变化变量可以被认为是该单个顶点的片段着色器的参数。

为什么它们被称为变化的变量？因为它们在应用于三角形上的单个像素时，会自动改变其值。从技术上讲，这些值是线性内插的。术语插值是指给定一个起始值和终止值，中间的值逐渐改变，从起始值变形为终止值。例如，从10开始，以22结束，有3个中间值，插值会产生13、16和19。所谓线性插值是指任何两个连续的数值之间的差值都是一样的。

变化的变量的线性插值会自动发生。你对插值没有控制权，也不能停止插值。如果你有一个希望在一个三角形的所有像素上保持不变的值，你仍然必须把它声明为一个变化的变量，但你可以把起始值和终止值设置为相同，插值将计算出一个不改变的值。例如，从10插值到10将计算出每一个介于两者之间的数值为10。

### 缓冲区对象

在这个例子中，顶点颜色的缓冲对象中的数据发生了变化。研究以下例子中simple_model_render_03.js文件中的代码。

点击查看[交互式例子](http://learnwebgl.brown37.net/rendering/render_example_03.html#the-buffer-object-s)

[在新的标签或窗口中打开这个webgl程序](http://learnwebgl.brown37.net/rendering/simple_pyramid_color_vertices/simple_pyramid_color_vertices3.html)

### 访问着色器变量

着色器程序没有改变，所以没有改变获取着色器变量的位置。

### 将一个缓冲区对象与一个属性变量连接起来 

与缓冲区对象的链接保持不变

### 渲染

模型的渲染仍然没有改变。上面例子中的渲染功能在第172-193行。

### 总结

构成点、线或三角形的片段的颜色是使用内插值分配的。在顶点计算的值是用于插值的起始和结束值。



